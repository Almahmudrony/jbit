#! /usr/bin/perl

$BSD = <<'END';
# BSD DEFAULTS AND LOCAL PLATFORM OVERRIDE (tested on NetBSD 1.6.2)
#

HAS_LOCAL_MK = 0
.ifdef PLATFORM
.if $(PLATFORM) == "local"
HAS_LOCAL_MK = 1
.include "Local.mk"
.endif
.endif
.if $(HAS_LOCAL_MK) == 0

OBJS += stdout.o xv65.o

.endif

#
END

print <<END;
# File generated by genbsd.pl - DO NOT EDIT

END
$out = 1;
while (<>) {
	chop;
	if (/^# PLATFORM SELECTION$/) { $out = 0; print $BSD; }
	elsif (/^# RULES$/) { $out = 1; }
	if ($out) { print "$_\n"; }
}
